"use strict";(self.webpackChunkmeilisearch_docs=self.webpackChunkmeilisearch_docs||[]).push([[51],{2403:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"installation","title":"Module installation","description":"Prerequisites","source":"@site/docs/02-installation.md","sourceDirName":".","slug":"/installation","permalink":"/magento2-module-meilisearch-docs/installation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"Module installation","title":"Module installation"},"sidebar":"docSidebar","previous":{"title":"Install Meilisearch","permalink":"/magento2-module-meilisearch-docs/Introduction/local"},"next":{"title":"Facet Merchandising","permalink":"/magento2-module-meilisearch-docs/Merchandising/facets"}}');var s=i(4848),t=i(8453);const l={sidebar_label:"Module installation",title:"Module installation"},r="Installation",o={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Magento 2 Module Installation",id:"magento-2-module-installation",level:2},{value:"Installation",id:"installation-1",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Generate a MASTER API Key",id:"generate-a-master-api-key",level:2},{value:"Option 1 \u2013 CLI Configuration",id:"option-1--cli-configuration",level:3},{value:"Option 2 \u2013 Admin Panel Configuration",id:"option-2--admin-panel-configuration",level:3},{value:"Indexing",id:"indexing",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"installation",children:"Installation"})}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Magento >= 2.4.4"}),"\n",(0,s.jsx)(n.li,{children:"Meilisearch >= v1.9.0"}),"\n",(0,s.jsx)(n.li,{children:"PHP >= 8.1"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"magento-2-module-installation",children:"Magento 2 Module Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"composer require walkwizus/magento2-module-meilisearch\nbin/magento module:enable Walkwizus_MeilisearchBase Walkwizus_MeilisearchCatalog Walkwizus_MeilisearchFrontend Walkwizus_MeilisearchIndices Walkwizus_MeilisearchMerchandising\nbin/magento setup:upgrade\n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"Breeze Compatibility",type:"info",children:[(0,s.jsxs)(n.p,{children:["If you are using the ",(0,s.jsx)(n.strong,{children:"Breeze"})," frontend, a compatibility module is available to ensure seamless integration with Meilisearch."]}),(0,s.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,s.jsx)(n.a,{href:"https://github.com/walkwizus/magento2-module-breeze-meilisearch",children:"Breeze Compatibility Module"})]}),(0,s.jsx)(n.h3,{id:"installation-1",children:"Installation"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"composer require walkwizus/magento2-module-meilisearch-breeze\nbin/magento module:enable Walkwizus_MeilisearchBreeze\nbin/magento setup:upgrade\n"})})]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.p,{children:"You can configure the connection to your Meilisearch instance either via CLI or directly from the Magento Admin Panel."}),"\n",(0,s.jsx)(n.h2,{id:"generate-a-master-api-key",children:"Generate a MASTER API Key"}),"\n",(0,s.jsx)(n.p,{children:"If you want a secure installation, you can generate a master key using the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bin/magento meilisearch:generate:master-key\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u26a0\ufe0f This command only generates a Meilisearch key and can optionally store it in Magento, but it does ",(0,s.jsx)(n.strong,{children:"not"})," restart Meilisearch with the new master key.\nTo restart Meilisearch with this key, you need to add it to your ",(0,s.jsx)(n.code,{children:"compose.yaml"})," if you're using Docker:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"meilisearch:\n  image: 'getmeili/meilisearch:latest'\n  ports:\n    - '${FORWARD_MEILISEARCH_PORT:-7700}:7700'\n  volumes:\n    - 'meilidata:/meili_data'\n    #- './meilisearch-key.pem:/root/meilisearch-key.pem'\n    #- './meilisearch.pem:/root/meilisearch.pem'\n  environment:\n    #- MEILI_SSL_CERT_PATH=/root/meilisearch.pem\n    #- MEILI_SSL_KEY_PATH=/root/meilisearch-key.pem\n    - MEILI_MASTER_KEY=4ff477ac22ce5c3788cdc2799cef8f63\n  healthcheck:\n    test: [\"CMD\", \"wget\", \"--no-verbose\", \"--spider\", \"http://localhost:7700/health\"]\n    retries: 3\n    timeout: 5s\n"})}),"\n",(0,s.jsx)(n.p,{children:"If you're using a standard installation (e.g. on a server), restart Meilisearch with the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'./meilisearch --master-key="MASTER_KEY"\n'})}),"\n",(0,s.jsx)(n.p,{children:"When Meilisearch starts in secure mode with a MASTER KEY, it automatically generates three default API keys covering most use cases. You can display them with the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bin/magento meilisearch:keys\n"})}),"\n",(0,s.jsx)(n.p,{children:"You should see an output like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"+------------------------+--------------------------------------+------------------------------------------------------------------+-------------------------+---------+------------+\n| Name                   | UID                                  | Key                                                              | Actions                 | Indexes | Expires At |\n+------------------------+--------------------------------------+------------------------------------------------------------------+-------------------------+---------+------------+\n| Default Search API Key | 8c779f7b-5ea4-4ab5-bb09-82800cc097f2 | b7d005b29630e620ebb733549f989ac0be8225b0f8017b2cb08160c31ea3b49e | search                  | *       | never      |\n| Default Admin API Key  | de1ee113-b2ce-4855-89e2-8c046c9c4a1f | e2bfca897f28a8576fd9c14c51dca38b02c70974600daba1a2bc06de86d61bcb | *                       | *       | never      |\n| Default Chat API Key   | 07eed6fc-348d-4c02-9705-1c0b9ba30828 | 6f4c4cb918011d21ecfb6c82d85b1b4eb5e2fe3103daddfbe332fd51e1478baf | chatCompletions, search | *       | never      |\n+------------------------+--------------------------------------+------------------------------------------------------------------+-------------------------+---------+------------+\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Default Search API Key"}),": This key should be used on the Magento frontend (configured under ",(0,s.jsx)(n.em,{children:"Meilisearch Server API Key (Client Side)"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Default Admin API Key"}),": This key should be used on the server-side to index documents into Meilisearch. ",(0,s.jsx)(n.strong,{children:"It must never be exposed on the frontend"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"option-1--cli-configuration",children:"Option 1 \u2013 CLI Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'bin/magento config:set meilisearch_server/settings/address meilisearch:7700\nbin/magento config:set meilisearch_server/settings/master_key "YOUR_MASTER_KEY"\nbin/magento config:set meilisearch_server/settings/api_key "YOUR_API_KEY"\nbin/magento config:set meilisearch_server/settings/client_address localhost:7700\nbin/magento config:set meilisearch_server/settings/client_api_key "YOUR_CLIENT_API_KEY"\nbin/magento config:set catalog/search/engine meilisearch\n'})}),"\n",(0,s.jsx)(n.h3,{id:"option-2--admin-panel-configuration",children:"Option 2 \u2013 Admin Panel Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Stores > Configuration > Meilisearch > Server Settings"}),(0,s.jsx)(n.br,{}),"\n","From there, you can fill in the server URL, master/public/private API keys and prefix settings."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Magento Admin Configuration Screenshot",src:i(3463).A+"",width:"1503",height:"669"})}),"\n",(0,s.jsx)(n.h2,{id:"indexing",children:"Indexing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bin/magento indexer:reindex catalogsearch_fulltext\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},3463:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/store-configuration-1f42c5b9a594684c1d77818425284187.png"},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var a=i(6540);const s={},t=a.createContext(s);function l(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);